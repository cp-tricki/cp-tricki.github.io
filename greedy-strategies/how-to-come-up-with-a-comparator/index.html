
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://cp-tricki.github.io/greedy-strategies/how-to-come-up-with-a-comparator/">
      
      
        <link rel="prev" href="../../dp/translate-dp-to-the-matrix-form/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.2">
    
    
      
        <title>How to come up with a comparator? - CP-Tricki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d451bc0e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a5377069.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#acknowledgements" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CP-Tricki" class="md-header__button md-logo" aria-label="CP-Tricki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CP-Tricki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How to come up with a comparator?
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cp-tricki/cp-tricki.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cp-tricki/cp-tricki.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../combinatorics/Counting%20labeled%20trees/" class="md-tabs__link">
          
  
  Combinatorics

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../dp/translate-dp-to-the-matrix-form/" class="md-tabs__link">
          
  
  Dp

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Greedy strategies

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CP-Tricki" class="md-nav__button md-logo" aria-label="CP-Tricki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CP-Tricki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cp-tricki/cp-tricki.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cp-tricki/cp-tricki.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Combinatorics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Combinatorics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../combinatorics/Counting%20labeled%20trees/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Counting labeled trees
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../combinatorics/One%20can%20process%20bits%20independently%20when%20relevant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    One can process bits independently when relevant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../combinatorics/One%20can%20use%20determinants%20to%20count%20lattice%20paths/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    One can use determinants to count lattice paths
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../combinatorics/Permutations%20can%20be%20represented%20as%20graphs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permutations can be represented as graphs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Dp
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Dp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dp/translate-dp-to-the-matrix-form/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translate DP to the matrix form
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Greedy strategies
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Greedy strategies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    How to come up with a comparator?
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    How to come up with a comparator?
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#acknowledgements" class="md-nav__link">
    Acknowledgements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#short-description" class="md-nav__link">
    Short description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-description" class="md-nav__link">
    General description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-1-a-tower-of-boxes" class="md-nav__link">
    Example 1 (a tower of boxes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-2-this-cses-problem" class="md-nav__link">
    Example 2 (this CSES problem).
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#online-judges" class="md-nav__link">
    Online Judges
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#acknowledgements" class="md-nav__link">
    Acknowledgements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#short-description" class="md-nav__link">
    Short description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-description" class="md-nav__link">
    General description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-1-a-tower-of-boxes" class="md-nav__link">
    Example 1 (a tower of boxes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-2-this-cses-problem" class="md-nav__link">
    Example 2 (this CSES problem).
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#online-judges" class="md-nav__link">
    Online Judges
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  
    <a href="https://github.com/cp-tricki/cp-tricki.github.io/edit/main/docs/greedy-strategies/how-to-come-up-with-a-comparator.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/cp-tricki/cp-tricki.github.io/raw/main/docs/greedy-strategies/how-to-come-up-with-a-comparator.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


  <h1>How to come up with a comparator?</h1>

<h3 id="acknowledgements">Acknowledgements</h3>
<p>We start from a simple trick, which was exposed by Sergei Kopeliovich at Winter Programming School in Kharkiv in 2013.</p>
<h3 id="short-description">Short description</h3>
<p>If it seems that a problem can be solved by an algorithm of the form: "arrange the objects in a suitable way and then work greedily", there is a general strategy to devise a comparator for this sort.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>No specific knowledge is required, though familiarity with greedy algorithms would be useful.</p>
<h3 id="general-description">General description</h3>
<p><em>The auxiliary problem</em>: find an order that optimises a construction (that is the essential part of the considered problem) if it is known that such an order exists.</p>
<p>We first consider a simplified problem, when only two objects exist, say <span class="arithmatex">\(A\)</span> and <span class="arithmatex">\(B\)</span>. Then our comparator should determine which order is better: <span class="arithmatex">\(AB\)</span> or <span class="arithmatex">\(BA\)</span>. To do so, we can normally introduce a penalty (or a cost) function <span class="arithmatex">\(f(A,B)\)</span> denoting the amount of penalty (or cost) we have if one takes object <span class="arithmatex">\(A\)</span> first and object <span class="arithmatex">\(B\)</span> second. Then our comparator chooses that order in which the penalty is minimal (or cost is maximal). If this comparator (relation) <span class="arithmatex">\(A\prec B\)</span> (which is <span class="arithmatex">\(A\prec B \iff penalty(A,B)&lt;penalty(B,A)\)</span> or <span class="arithmatex">\(cost(A,B)&gt;cost(B,A)\)</span>) is transitive (i.e. if <span class="arithmatex">\(A\prec B\)</span> and <span class="arithmatex">\(B\prec C\)</span> then <span class="arithmatex">\(A\prec C\)</span>) then after sorting all the objects with respect to it we shall obtain the <em>optimal</em> order.</p>
<p><em>The main problem</em>: find a maximal-size subset that optimises a construction. (The difference from idea 1 is that we are not forced to take <em>all</em> elements.)</p>
<p>To do so, we use the comparator from the <em>auxiliary problem</em>, and take objects greedily one by one. At each step, we make a choice:</p>
<ol>
<li>
<p>Put this object into the answer set,</p>
</li>
<li>
<p>Replace an instance in the answer set with this object.</p>
</li>
</ol>
<p>More generally one can write here a knapsack-like dp (if we have a subset we know the order by the auxiliary problem).</p>
<h3 id="example-1-a-tower-of-boxes">Example 1 (a tower of boxes)</h3>
<p>Given <span class="arithmatex">\(n\)</span> boxes, each of which has its weight <span class="arithmatex">\(m_i\)</span> and the weight it can carry on the top <span class="arithmatex">\(a_i\)</span>, determine the size of the largest tower one can build. </p>
<p><strong>Step 1. Build a tower of all boxes.</strong> 
In other words, we need to arrange the boxes in such a way that nothing breaks. Considering two distinct boxes, say <span class="arithmatex">\(i\)</span> and <span class="arithmatex">\(j\)</span>, we ask: when the order <span class="arithmatex">\((i,j)\)</span> is better than <span class="arithmatex">\((j,i)\)</span>? Obviously, that is when the excess of our carrying abilities is greater (that is when the total weight that we can additionally carry is greater). In other words, our cost function looks like this (here box <span class="arithmatex">\(j\)</span> stands on the top of <span class="arithmatex">\(i\)</span>): <span class="arithmatex">\(f(i, j) = \min(\)</span> total weight that can be still carried by box <span class="arithmatex">\(i\)</span>, total weight that can be still carried by <span class="arithmatex">\(j)\)</span>, i.e. <span class="arithmatex">\(f(i, j) = \min(a_i - m_j , a_j)\)</span>. Then we will build the tower in descending order of value.</p>
<p><strong>Step 2. Build a max-size tower.</strong>
Sort the boxes in the increasing order with respect to the comparator from Step 1. Take them greedily: if we can put the next box below the already built tower, we do it; otherwise, we ponder whether can we replace some of the boxes in the tower with our current one and decrease the weight the bottom box carries. </p>
<h3 id="example-2-this-cses-problem">Example 2 (<a href="https://cses.fi/problemset/task/2426">this CSES problem</a>).</h3>
<p>Given <span class="arithmatex">\(n\)</span> people and their programmer skill (<span class="arithmatex">\(skill_1\)</span>) and artistic skill (<span class="arithmatex">\(skill_2\)</span>). We need to take exactly <span class="arithmatex">\(a\)</span> programmers and <span class="arithmatex">\(b\)</span> artists. Maximise total skill. </p>
<p><strong>Step 1. Take all people, at least <span class="arithmatex">\(a\)</span> programmers and at least <span class="arithmatex">\(b\)</span> artists.</strong> (<a href="https://www.eolymp.com/en/problems/182">this eolymp problem</a>)</p>
<p>Applying to this problem, the cost (answer) of order <span class="arithmatex">\(AB\)</span> (take programmer skill of <span class="arithmatex">\(A\)</span> and artistique skill of <span class="arithmatex">\(B\)</span>) is <span class="arithmatex">\(skill_1(A) + skill_2(B)\)</span>, and the cost of order <span class="arithmatex">\(BA\)</span> (take the artistic skill of <span class="arithmatex">\(B\)</span> and programmer skill of <span class="arithmatex">\(A\)</span>) is <span class="arithmatex">\(skill_2(A) + skill_1(B)\)</span>. Then <span class="arithmatex">\(cost (AB) &gt; cost (BA)\)</span> is equivalent to <span class="arithmatex">\(skill_2(A) - skill_1(A) &lt; skill_2(B) - skill_1(A)\)</span> which we take as our comparator.</p>
<p><strong>Step 2. Take exactly <span class="arithmatex">\(a\)</span> programmers and exactly <span class="arithmatex">\(b\)</span> artists.</strong></p>
<p>Below we describe our implementation of the general strategy.</p>
<p><strong>1.</strong> (*) Take a person with the best programmer skill (we shall replace bad choices later) and keep a set X containing values of penalty function (<span class="arithmatex">\(skill_2(A) - skill_1(A)\)</span>, as in Step 1) for these choices.</p>
<p><strong>2.</strong> For other people, declare sets <span class="arithmatex">\(F\)</span> and <span class="arithmatex">\(S\)</span> that keep them sorted by the first (second) parameter. These sets will be used to make greedy steps further.</p>
<p><strong>3.</strong> We take the best <span class="arithmatex">\(b\)</span> people, replacing previous choices with more optimal ones if needed. Take the object <span class="arithmatex">\(A\)</span> with the largest artistique skill. And we have two ways further</p>
<ul>
<li>(Greedy) <span class="arithmatex">\(\Delta_g\)</span> = the change of answer if we take <span class="arithmatex">\(A\)</span> (with the maximal <span class="arithmatex">\(y\)</span>) and do not change the previous element of the answer.</li>
<li>(Replacing) <span class="arithmatex">\(\Delta_r\)</span>, = the change of answer if we take the maximal <span class="arithmatex">\(x\)</span> from the other people' and replace the worst (in terms of penalty) choice in (*).</li>
</ul>
<p><strong>4.</strong> Depending on which choice ("greedy" or "replacing) is better we change our sets.</p>
<h3 id="online-judges">Online Judges</h3>
<ol>
<li><a href="https://www.eolymp.com/en/problems/4701">Коробки (Boxes)</a> (problem from Example 1, only Russian statement available)</li>
<li><a href="https://www.eolymp.com/en/problems/9640">Dino and fetters</a></li>
<li><a href="https://www.eolymp.com/en/problems/1591">Shoemaker Problem</a></li>
<li><a href="https://www.eolymp.com/en/problems/2219">Snow White and n gnomes</a></li>
<li><a href="https://www.eolymp.com/en/problems/4699">Приключение (Adventure)</a> (only Russian statement available) </li>
<li><a href="https://codeforces.com/gym/104397/problem/A">Inverse Pairs of Binary Strings</a></li>
</ol>





                








<div class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
    <span class="contributors-text">Contributors:&nbsp;<a href="https://github.com/miaowtin" title="miaowtin" data-bi-name="contributorprofile" target="_blank">miaowtin </a></span>
</div>


              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "content.action.view", "content.action.edit"], "search": "../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.726fbb30.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="../../javascripts/commits.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>